{% extends 'layout.html' %}
{% block content %}
<div class="container mt-5">
  <h2 class="mb-4"><i class="fas fa-edit"></i> Malzeme Düzenle</h2>
  <form method="POST">
    <div class="row">
      <div class="col-md-6 mb-3">
        <label for="barcode">Barkod</label>
        <input type="text" class="form-control" name="barcode" value="{{ parca.barcode }}" required>
      </div>
      <div class="col-md-6 mb-3">
        <label for="ekipman_turu">Ekipman Türü</label>
        <input type="text" class="form-control" name="ekipman_turu" value="{{ parca.ekipman_turu }}" required>
      </div>
      <div class="col-md-6 mb-3">
        <label for="model_adi">Model Adı</label>
        <input type="text" class="form-control" name="model_adi" value="{{ parca.model_adi }}" required>
      </div>
      <div class="col-md-6 mb-3">
        <label for="konum">Konum</label>
        <input type="text" class="form-control" name="konum" value="{{ parca.konum }}" required>
      </div>

      <div class="col-md-6 mb-3">
        <label for="son_bakim_tarihi">Son Bakım Tarihi</label>
        <input type="date" class="form-control" name="son_bakim_tarihi" value="{{ parca.son_bakim_tarihi }}">
      </div>
      <div class="col-md-6 mb-3">
        <label for="bakim_dongusu">Bakım Döngüsü (ay)</label>
        <input type="number" class="form-control" name="bakim_dongusu" value="{{ parca.bakim_dongusu }}" min="1">
      </div>
      <div class="col-md-6 mb-3">
        <label for="bir_sonraki_bakim">Bir Sonraki Bakım</label>
        <input type="date" class="form-control bg-light" value="{{ parca.bir_sonraki_bakim.strftime('%Y-%m-%d') if parca.bir_sonraki_bakim else '' }}" readonly>
      </div>
      <div class="col-md-6 mb-3">
        <label for="yuk_kapasitesi">Yük Kapasitesi</label>
        <input type="text" class="form-control" name="yuk_kapasitesi" value="{{ parca.yuk_kapasitesi }}">
      </div>
      <div class="col-md-6 mb-3">
        <label for="sorumlu_kisi">Sorumlu Kişi</label>
        <input type="text" class="form-control" name="sorumlu_kisi" value="{{ parca.sorumlu_kisi }}">
      </div>

      <div class="col-md-6 mb-3">
        <label for="arizali_checkbox">Durum</label><br>
        <div class="form-check mt-1">
          <input class="form-check-input" type="checkbox" name="arizali_mi" id="arizali_mi" {% if parca.durum == 'Arızalı' %}checked{% endif %}>
          <label class="form-check-label" for="arizali_mi">
            Bu parça arızalı mı?
          </label>
        </div>
        <small class="text-muted d-block mt-1">* Diğer durumlar sistem tarafından otomatik belirlenir.</small>
      </div>

      <div class="col-12 mb-3">
        <label for="kisa_aciklama">Açıklama / Not</label>
        <textarea class="form-control" name="kisa_aciklama" rows="3">{{ parca.kisa_aciklama }}</textarea>
      </div>
    </div>

    <button type="submit" class="btn btn-success">Kaydet</button>
    <a href="{{ url_for('main.detail', parca_id=parca.id) }}" class="btn btn-secondary">İptal</a>
  </form>
</div>
{% endblock %}
